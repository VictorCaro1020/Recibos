<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculadora de recibos (Luz, Agua, Gas) - Comunidad</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <main>

    <h1>Calculadora de recibos — Luz, Agua y Gas</h1>

    <p class="intro">
      Esta página calcula cuánto paga cada piso/unidad. Los datos se guardan automáticamente
      en tu navegador para que no tengas que escribirlos cada vez.
    </p>

    <section class="panel">

      <h2>Unidades y habitantes</h2>

      <p>Agrega o edita cada unidad. Puedes indicar cuántas personas y el arriendo mensual por unidad.</p>

      <div class="units-wrapper">
        <div id="units-list"></div>

        <div class="inline">
          <input id="new-unit-name" placeholder="Nombre unidad (ej. 101)" />
          <input id="new-unit-people" type="number" min="0" value="1" style="width:5.5rem" />
          <input id="new-unit-rent" type="number" min="0" value="0" style="width:7.5rem" placeholder="Arriendo" />
          <button id="add-unit">Agregar unidad</button>
        </div>
      </div>



    </section>

    <section class="panel">

      <h2>Electricidad A (201 / 202)</h2>

      <div class="grid">

        <label>Total kWh (recibo A): <input id="ea-total-kwh" type="number" min="0" step="0.01"></label><br>
        <label>Precio total (recibo A): <input id="ea-total-price" type="number" min="0" step="0.01"></label><br>
        <label>Lectura anterior 202: <input id="ea-prev-202" type="number" min="0" step="0.01"></label><br>
        <label>Lectura actual 202: <input id="ea-curr-202" type="number" min="0" step="0.01"></label><br>

        <label>Aseo (recibo A): <input id="ea-aseo" type="number" min="0" step="0.01" placeholder="Monto aseo"></label><br>

      </div>
      <h2>Electricidad B (401, 500 y 402)</h2>

      <div class="grid">

        <label>Total kWh (recibo B): <input id="eb-total-kwh" type="number" min="0" step="0.01"></label><br>
        <label>Precio total (recibo B): <input id="eb-total-price" type="number" min="0" step="0.01"></label><br>
        <label>Lectura anterior 401: <input id="eb-prev-401" type="number" min="0" step="0.01"></label><br>
        <label>Lectura actual 401: <input id="eb-curr-401" type="number" min="0" step="0.01"></label><br>
        <label>Lectura anterior 500: <input id="eb-prev-500" type="number" min="0" step="0.01"></label><br>
        <label>Lectura actual 500: <input id="eb-curr-500" type="number" min="0" step="0.01"></label><br>
        <label>Aseo (recibo B): <input id="eb-aseo" type="number" min="0" step="0.01" placeholder="Monto aseo"></label><br>

      </div>

    </section>

    <section class="panel">

      <h2>Agua (por persona)</h2>

      <div class="grid">

        <label>Total factura agua: <input id="water-total-price" type="number" min="0" step="0.01"></label><br>

      </div>

    </section>

    <section class="panel">

      <h2>Gas (por grupos)</h2>

      <div class="grid">

        <label>Total factura gas (201+202): <input id="gas-201-202-price" type="number" min="0" step="0.01"></label><br>
        <label>Total factura gas (401+402): <input id="gas-401-402-price" type="number" min="0" step="0.01"></label><br>

      </div>

    </section>

    <section class="panel">


      <h2>Extras (asignados a unidad)</h2>

      <p>Agrega cargos por unidad. Cada extra debe asignarse a una unidad específica (deuda, parqueadero, etc.).</p>

      <div id="extras-list"></div>

      <div class="inline">
        <input id="extra-name" placeholder="Nombre extra (ej. Parqueadero)" />
        <input id="extra-amount" type="number" min="0" step="0.01" placeholder="Monto" />
        <select id="extra-unit-select"></select>
        <button id="add-extra">Agregar extra</button>
      </div>

    </section>

    <section class="panel">

      <h2>Resumen por unidad</h2>

      <div class="summary-controls inline">
        <label>Seleccionar unidad:
          <select id="unit-summary-select"></select>
        </label>
        <label>Mes facturado:
          <select id="summary-month-select"></select>
        </label>
        <label><input type="checkbox" id="include-aseo" checked> Aseo</label>
        <label><input type="checkbox" id="include-electricity" checked> Luz</label>
        <label><input type="checkbox" id="include-water" checked> Agua</label>
        <label><input type="checkbox" id="include-gas" checked> Gas</label>
        <label><input type="checkbox" id="include-extras" checked> Extras</label>
        <label><input type="checkbox" id="include-rent" checked> Arriendo</label>
        <button id="generate-receipt-img" class="small-btn">Generar imagen (PNG)</button>
      </div>

      <div id="unit-summary-card" class="panel"></div>

      <div id="results" class="results-wrapper"></div>

      

      <div class="actions">
        <button id="reset-all">Borrar todos los datos guardados</button>
        <button id="export-json">Exportar datos (JSON)</button>
        <button id="import-json">Importar datos (JSON)</button>
        <input id="import-file" type="file" accept="application/json" style="display:none" />
      </div>

    </section>

    <footer>
      <small>Guardado localmente en tu navegador. Si quieres compartir o usar entre dispositivos, exporta el JSON y luego impórtalo.</small>
    </footer>

  </main>

  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script src="app.js"></script>

</body>
</html>
